{"version":3,"sources":["components/Profile/ProfileForm.module.css","components/Layout/MainNavigation.module.css","components/Profile/UserProfile.module.css","components/StartingPage/StartingPageContent.module.css","store/auth-contex.js","components/Layout/MainNavigation.js","components/Layout/Layout.js","components/Profile/ProfileForm.js","components/Profile/UserProfile.js","components/Auth/AuthForm.js","pages/AuthPage.js","components/StartingPage/StartingPageContent.js","pages/HomePage.js","App.js","index.js","components/Auth/AuthForm.module.css"],"names":["module","exports","AuthContext","React","createContext","token","isLoggedIn","login","logout","AuthContexProvider","props","initialToken","localStorage","getItem","useState","setToken","contextValue","setItem","removeItem","Provider","value","children","MainNavigation","authCtx","useContext","AuthContex","className","classes","header","to","logo","onClick","Layout","ProfileForm","history","useHistory","newPasswordRef","useRef","form","onSubmit","event","preventDefault","newPassword","current","fetch","method","body","JSON","stringify","idToken","password","returnSecureToken","headers","then","res","ok","json","data","Error","error","message","replace","catch","err","alert","control","htmlFor","type","id","ref","action","UserProfile","profile","AuthForm","emailRef","passwordRef","isLogin","setIsLogin","isLoading","setIsLoading","auth","url","enteredEmail","enteredPassword","email","console","log","required","actions","toggle","prevState","AuthPage","StartingPageContent","starting","HomePage","App","path","exact","ReactDOM","createRoot","document","getElementById","render"],"mappings":"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","file":"static/js/main.a389b1cd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ProfileForm_form__1BYhD\",\"control\":\"ProfileForm_control__3vGLG\",\"action\":\"ProfileForm_action__36W6-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"MainNavigation_header__2AdDv\",\"logo\":\"MainNavigation_logo__3wSrJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"UserProfile_profile__3lL_o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"starting\":\"StartingPageContent_starting__1VNCQ\"};","import React, { useState, useEffect, useCallback } from \"react\";\r\n\r\nlet logoutTimer;\r\n\r\nconst AuthContext = React.createContext({\r\n  token: \"\",\r\n  isLoggedIn: false,\r\n  login: (token) => {},\r\n  logout: () => {},\r\n});\r\n\r\nexport const AuthContexProvider = (props) => {\r\n  const initialToken = localStorage.getItem(\"token\");\r\n\r\n  const [token, setToken] = useState(initialToken);\r\n\r\n  const userIsLoggedIn = !!token;\r\n\r\n  const logoutHandler = () => {\r\n    setToken(null);\r\n    localStorage.removeItem(\"token\");\r\n  };\r\n\r\n  const loginHandler = (token) => {\r\n    setToken(token);\r\n    localStorage.setItem(\"token\", token);\r\n  };\r\n\r\n  const contextValue = {\r\n    token: token,\r\n    isLoggedIn: userIsLoggedIn,\r\n    login: loginHandler,\r\n    logout: logoutHandler,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={contextValue}>\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContext;\r\n","import { Link } from \"react-router-dom\";\nimport { useContext } from \"react\";\n\nimport classes from \"./MainNavigation.module.css\";\nimport AuthContex from \"../../store/auth-contex\";\n\nconst MainNavigation = () => {\n  const authCtx = useContext(AuthContex);\n\n  const logoutHandler = () => {\n    authCtx.logout();\n  };\n  return (\n    <header className={classes.header}>\n      <Link to=\"/\">\n        <div className={classes.logo}>React Auth</div>\n      </Link>\n      <nav>\n        <ul>\n          {!authCtx.isLoggedIn && (\n            <li>\n              <Link to=\"/auth\">Login</Link>\n            </li>\n          )}\n          {authCtx.isLoggedIn && (\n            <li>\n              <Link to=\"/profile\">Profile</Link>\n            </li>\n          )}\n\n          {authCtx.isLoggedIn && (\n            <li>\n              <button onClick={logoutHandler}>Logout</button>\n            </li>\n          )}\n        </ul>\n      </nav>\n    </header>\n  );\n};\n\nexport default MainNavigation;\n","import { Fragment } from 'react';\n\nimport MainNavigation from './MainNavigation';\n\nconst Layout = (props) => {\n  return (\n    <Fragment>\n      <MainNavigation />\n      <main>{props.children}</main>\n    </Fragment>\n  );\n};\n\nexport default Layout;\n","import classes from \"./ProfileForm.module.css\";\nimport { useRef, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport AuthContex from \"../../store/auth-contex\";\n\nconst ProfileForm = () => {\n  const history = useHistory();\n  const newPasswordRef = useRef();\n  const authCtx = useContext(AuthContex);\n  const token = authCtx.token;\n\n  const changePasswordHandler = (event) => {\n    event.preventDefault();\n\n    const newPassword = newPasswordRef.current.value;\n    fetch(\n      \"https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyBedZcmNqyR2OzUvwzJfn-OwVSlmlswY2g\",\n      {\n        method: \"POST\",\n        body: JSON.stringify({\n          idToken: token,\n          password: newPassword,\n          returnSecureToken: true,\n        }),\n        headers: {\n          \"content-type\": \"application/json\",\n        },\n      }\n    )\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        } else {\n          return res.json().then((data) => {\n            throw new Error(data.error.message);\n          });\n        }\n      })\n      .then((data) => {\n        authCtx.login(data.idToken);\n        history.replace(\"/\");\n      })\n      .catch((err) => {\n        alert(err);\n      });\n  };\n\n  return (\n    <form className={classes.form} onSubmit={changePasswordHandler}>\n      <div className={classes.control}>\n        <label htmlFor=\"new-password\">New Password</label>\n        <input type=\"password\" id=\"new-password\" ref={newPasswordRef} />\n      </div>\n      <div className={classes.action}>\n        <button>Change Password</button>\n      </div>\n    </form>\n  );\n};\n\nexport default ProfileForm;\n","import ProfileForm from './ProfileForm';\nimport classes from './UserProfile.module.css';\n\nconst UserProfile = () => {\n  return (\n    <section className={classes.profile}>\n      <h1>Your User Profile</h1>\n      <ProfileForm />\n    </section>\n  );\n};\n\nexport default UserProfile;\n","import { useState, useRef, useContext } from \"react\";\nimport AuthContex from \"../../store/auth-contex\";\nimport { useHistory } from \"react-router-dom\";\n\nimport classes from \"./AuthForm.module.css\";\n\nconst AuthForm = () => {\n  const emailRef = useRef();\n  const passwordRef = useRef();\n  const [isLogin, setIsLogin] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  const authCtx = useContext(AuthContex);\n  const history = useHistory();\n\n  const switchAuthModeHandler = () => {\n    setIsLogin((prevState) => !prevState);\n  };\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    const enteredEmail = emailRef.current.value;\n    const enteredPassword = passwordRef.current.value;\n\n    setIsLoading(true);\n    let url;\n    if (isLogin) {\n      url =\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBedZcmNqyR2OzUvwzJfn-OwVSlmlswY2g\";\n    } else {\n      url =\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBedZcmNqyR2OzUvwzJfn-OwVSlmlswY2g\";\n    }\n\n    fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify({\n        email: enteredEmail,\n        password: enteredPassword,\n        returnSecureToken: true,\n      }),\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n    })\n      .then((res) => {\n        setIsLoading(false);\n        if (res.ok) {\n          return res.json();\n        } else {\n          return res.json().then((data) => {\n            const errorMessage = \"Authentication failed\";\n            throw new Error(errorMessage);\n          });\n        }\n      })\n      .then((data) => {\n        authCtx.login(data.idToken);\n        history.replace(\"/\");\n        console.log(data);\n      })\n      .catch((err) => {\n        alert(err.message);\n      });\n  };\n\n  return (\n    <section className={classes.auth}>\n      <h1>{isLogin ? \"Login\" : \"Sign Up\"}</h1>\n      <form onSubmit={submitHandler}>\n        <div className={classes.control}>\n          <label htmlFor=\"email\">Your Email</label>\n          <input type=\"email\" id=\"email\" required ref={emailRef} />\n        </div>\n        <div className={classes.control}>\n          <label htmlFor=\"password\">Your Password</label>\n          <input type=\"password\" id=\"password\" required ref={passwordRef} />\n        </div>\n        <div className={classes.actions}>\n          {!isLoading && (\n            <button>{isLogin ? \"Login\" : \"Create Account\"}</button>\n          )}\n          {isLoading && <p>Loading...</p>}\n          <button\n            type=\"button\"\n            className={classes.toggle}\n            onClick={switchAuthModeHandler}\n          >\n            {isLogin ? \"Create new account\" : \"Login with existing account\"}\n          </button>\n        </div>\n      </form>\n    </section>\n  );\n};\n\nexport default AuthForm;\n","import AuthForm from '../components/Auth/AuthForm';\n\nconst AuthPage = () => {\n  return <AuthForm />;\n};\n\nexport default AuthPage;\n","import classes from './StartingPageContent.module.css';\n\nconst StartingPageContent = () => {\n  return (\n    <section className={classes.starting}>\n      <h1>Welcome on Board!</h1>\n    </section>\n  );\n};\n\nexport default StartingPageContent;\n","import StartingPageContent from '../components/StartingPage/StartingPageContent';\n\nconst HomePage = () => {\n  return <StartingPageContent />;\n};\n\nexport default HomePage;\n","import { Switch, Route, Redirect } from \"react-router-dom\";\nimport { useContext } from \"react\";\n\nimport Layout from \"./components/Layout/Layout\";\nimport UserProfile from \"./components/Profile/UserProfile\";\nimport AuthPage from \"./pages/AuthPage\";\nimport HomePage from \"./pages/HomePage\";\nimport AuthContex from \"./store/auth-contex\";\n\nfunction App() {\n  const authCtx = useContext(AuthContex);\n\n  return (\n    <Layout>\n      <Switch>\n        <Route path=\"/\" exact>\n          <HomePage />\n        </Route>\n        {!authCtx.isLoggedIn && (\n          <Route path=\"/auth\">\n            <AuthPage />\n          </Route>\n        )}\n\n        <Route path=\"/profile\">\n          {authCtx.isLoggedIn && <UserProfile />}\n          {!authCtx.isLoggedIn && <Redirect to=\"/auth\" />}\n        </Route>\n\n        <Route path=\"*\">\n          <Redirect to=\"/\" />\n        </Route>\n      </Switch>\n    </Layout>\n  );\n}\n\nexport default App;\n","import ReactDOM from \"react-dom/client\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport { AuthContexProvider } from \"./store/auth-contex\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(\n  <AuthContexProvider>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </AuthContexProvider>\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"AuthForm_auth__1W_Sm\",\"control\":\"AuthForm_control__1cFag\",\"actions\":\"AuthForm_actions__3AKxe\",\"toggle\":\"AuthForm_toggle__EQ1Kv\"};"],"sourceRoot":""}